<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원가입 - Pik J</title>
    <link rel="stylesheet" th:href="@{/css/userHome.css}">
    <style>
        body {
          font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
          margin: 0;
          background-color: #f9f9f9;
        }

        #header ul {
          list-style: none;
          display: flex;
          justify-content: center;
          padding: 30px 0;
          background-color: #f5f5f5;
          margin: 0;
        }

        #header ul li {
          position: relative;
          padding: 20px 40px;
          margin: 0 20px;
          border-radius: 50px;
          background-color: #e0e0e0;
          font-weight: bold;
          font-size: 18px;
          color: #333;
        }

        #header ul li:nth-child(4) {
          background-color: #78bdfd;
          color: white;
        }

        #header ul li::after {
          content: '→';
          position: absolute;
          right: -30px;
          top: 50%;
          transform: translateY(-50%);
          color: #888;
          font-size: 20px;
        }

        #header ul li:last-child::after {
          content: '';
        }

        #container {
          display: flex;
          justify-content: center;
          padding: 40px 20px;
        }

        .regist {
          background-color: white;
          border-radius: 16px;
          padding: 40px;
          max-width: 600px;
          width: 100%;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .regist h1 {
          text-align: center;
          color: #2b3a55;
          margin-bottom: 30px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
          margin-bottom: 15px;
        }

        .form-group label {
          font-weight: bold;
          margin-bottom: 5px;
          color: #444;
        }

        .form-group input {
          padding: 10px 12px;
          border: 1px solid #ccc;
          border-radius: 8px;
          font-size: 14px;
        }

        .btn-id-check {
          margin-top: 8px;
          padding: 6px 12px;
          border: none;
          border-radius: 6px;
          background-color: #ddd;
          cursor: pointer;
        }

        .message {
          font-size: 13px;
          margin-top: 5px;
        }

        .message.success {
          color: green;
        }

        .message.error {
          color: red;
        }

        .btn-group {
          display: flex;
          justify-content: center;
          gap: 20px;
          margin-top: 20px;
        }

        .btn-submit {
          background-color: #78bdfd;
          color: white;
          padding: 12px 24px;
          border-radius: 30px;
          border: none;
          font-size: 16px;
          cursor: pointer;
        }

        .btn-cancel {
          background-color: #ccc;
          color: #333;
          padding: 12px 24px;
          border-radius: 30px;
          border: none;
          font-size: 16px;
          cursor: pointer;
        }
    </style>
</head>
<body>

<div th:replace="header/userHeader :: main-header"></div>

<div id="main">
    <div id="header">
        <ul>
            <li>유형선택</li>
            <li>약관동의</li>
            <li>본인인증</li>
            <li>정보입력</li>
            <li>가입완료</li>
        </ul>
    </div>

    <div id="container">
        <div class="regist">
            <h1>회원가입</h1>
            <form name="form" th:action="@{/regist/adult/chugaProc}" method="post" enctype="multipart/form-data" onsubmit="return validateForm();">
                <input type="hidden" name="type" value="성인">
                <table border="1">
                    <!-- 아이디 -->
                    <div class="form-group">
                        <label for="id">아이디</label>
                        <input type="text" name="id" id="id">
                        <button type="button" class="btn-id-check" onclick="checkId()">중복확인</button>
                        <div id="idMsg" class="message"></div>
                    </div>

                    <!-- 비밀번호 -->
                    <div class="form-group">
                        <label for="pwd">비밀번호</label>
                        <input type="password" name="pwd" id="pwd" oninput="checkPasswordMatch()">
                    </div>

                    <!-- 비밀번호 확인 -->
                    <div class="form-group">
                        <label for="pwdChk">비밀번호 확인</label>
                        <input type="password" name="pwdChk" id="pwdChk" oninput="checkPasswordMatch()">
                        <div id="pwdMsg" class="message"></div>
                    </div>

                    <!-- 나머지 항목 -->
                    <div class="form-group"><label>이름</label><input type="text" name="name"></div>
                    <div class="form-group"><label>생년월일</label><input type="date" name="birthDate"></div>
                    <div class="form-group"><label>전화번호</label><input type="text" name="phone"></div>
                    <div class="form-group"><label>이메일</label><input type="text" name="email"></div>


                    <!-- 버튼 -->
                    <div class="btn-group">
                        <button class="btn-submit" type="submit">등록</button>
                        <button class="btn-cancel" type="button" onclick="location.href='/'">취소</button>
                    </div>

                </table>

            </form>
        </div>
    </div>
</div>


<div id="footer"></div>

<!-- JS 기능 -->
<script>
    let isIdChecked = false;

    function checkPasswordMatch() {
      const pwd = document.getElementById("pwd").value;
      const pwdChk = document.getElementById("pwdChk").value;
      const msg = document.getElementById("pwdMsg");

      if (pwd === "" || pwdChk === "") {
        msg.textContent = "";
        return;
      }

      if (pwd === pwdChk) {
        msg.textContent = "비밀번호가 일치합니다.";
        msg.className = "message success";
      } else {
        msg.textContent = "비밀번호가 일치하지 않습니다.";
        msg.className = "message error";
      }
    }

    function checkId() {
      const id = document.getElementById("id").value.trim();
      const msg = document.getElementById("idMsg");

      if (!id) {
        msg.textContent = "아이디를 입력하세요.";
        msg.className = "message error";
        isIdChecked = false;
        return;
      }


      setTimeout(() => {
        const isDuplicate = id === "admin" || id === "test"; // 예시
        if (isDuplicate) {
          msg.textContent = "이미 사용 중인 아이디입니다.";
          msg.className = "message error";
          isIdChecked = false;
        } else {
          msg.textContent = "사용 가능한 아이디입니다.";
          msg.className = "message success";
          isIdChecked = true;
        }
      }, 500);
    }

    function validateForm() {
      const pwd = document.getElementById("pwd").value;
      const pwdChk = document.getElementById("pwdChk").value;

      if (!isIdChecked) {
        alert("아이디 중복 확인을 해주세요.");
        return false;
      }

      if (pwd !== pwdChk) {
        alert("비밀번호가 일치하지 않습니다.");
        return false;
      }

      return true;
    }
</script>

</body>
</html>
